{"file_contents":{"models/review.js":{"content":"const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\nconst reviewSchema = new Schema({\n    comment: String,\n    rating: {\n        type: Number,\n        min: 1,\n        max: 5\n    },\n    created_at: {\n        type: Date,\n        default: Date.now()\n    },\n    author: {\n        type: Schema.Types.ObjectId,\n        ref: \"User\"\n    }\n});\n\nmodule.exports = mongoose.model(\"Review\", reviewSchema);","size_bytes":411},"utils/ExpressError.js":{"content":"class ExpressError extends Error {\n    constructor(statusCode, message) {\n        super();\n        this.statusCode = statusCode;\n        this.message = message;\n    }\n}\n\nmodule.exports = ExpressError;","size_bytes":200},"routes/user.js":{"content":"const express = require(\"express\");\nconst router = express.Router();\nconst User = require(\"../models/user.js\");\nconst wrapAsync = require(\"../utils/wrapAsync\");\nconst passport = require(\"passport\");\nconst { saveRedirectUrl } = require(\"../middleware.js\");\nconst userController = require(\"../controllers/users.js\");\n\nrouter\n    .route(\"/signup\")\n    .get(\n        userController.renderSignupForm\n    )\n    .post( \n        wrapAsync(userController.signup)\n    );\n\nrouter\n    .route(\"/login\")\n    .get(\n        userController.renderLoginForm\n    )\n    .post(\n        saveRedirectUrl,\n        passport.authenticate(\"local\", { failureRedirect: \"/login\", failureFlash: true}),\n        userController.postLogin\n    );\n\nrouter.get(\"/logout\",\n    userController.logout\n);\n\nmodule.exports = router;","size_bytes":788},"utils/wrapAsync.js":{"content":"module.exports = (fn) => {\n    return function(req, res, next) {\n        fn(req, res, next).catch(next);\n    }\n}","size_bytes":112},"controllers/reviews.js":{"content":"const Listing = require(\"../models/listing.js\");\nconst Review = require(\"../models/review.js\");\n\nmodule.exports.createReview = async (req, res) => {\n    let listing = await Listing.findById(req.params.id);\n    let newReview = new Review(req.body.review);\n    newReview.author = req.user._id;\n    listing.reviews.push(newReview);\n\n    await newReview.save();\n    await listing.save();\n\n    req.flash(\"success\", \"New Review Created!\");\n    res.redirect(`/listings/${req.params.id}`);\n};\n\nmodule.exports.destroyReview = async (req, res) => {\n    let { id, reviewId } = req.params;\n    await Listing.findByIdAndUpdate(id, {$pull: {reviews: reviewId}});\n    await Review.findByIdAndDelete(reviewId);\n    req.flash(\"success\", \"Review Deleted!\");\n    res.redirect(`/listings/${id}`);  \n};","size_bytes":781},"controllers/listings.js":{"content":"const Listing = require(\"../models/listing.js\");\n\nmodule.exports.index = async (req, res) => {\n    const allListings = await Listing.find({});\n    res.render(\"listings/index\", { allListings });\n};\n\nmodule.exports.renderNewForm = (req, res) => {      \n    res.render(\"listings/new\");\n};\n\nmodule.exports.showListing = async (req, res) => {\n    let { id } = req.params;\n    const listing = await Listing.findById(id)\n        .populate({\n            path: \"reviews\",\n            populate: {\n                path: \"author\"\n            }\n        })\n        .populate(\"owner\");\n    if(!listing) {\n        req.flash(\"error\", `Listing with id: ${id} does not exist!`);\n        res.redirect(\"/listings\");\n    }\n    else res.render(\"listings/show\", { listing });\n    console.log(listing);\n};\n\nmodule.exports.createListing = async (req, res) => {\n    let url = req.file.path;\n    let filename = req.file.filename;\n\n    let newListing = new Listing(req.body.listing);\n    newListing.owner = req.user._id;\n    newListing.image = {url, filename};\n    await newListing.save();\n    req.flash(\"success\", \"New Listing Created!\");\n    res.redirect(\"/listings\");\n};\n\nmodule.exports.renderEditForm = async (req, res) => {\n    let { id } = req.params;\n    const listing = await Listing.findById(id);\n\n    let originalImageUrl = listing.image.url;\n    listing.image.url = originalImageUrl.replace(\"/upload\", \"/upload/w_250\");\n    res.render(\"listings/edit\", { listing });\n};\n\nmodule.exports.updateListing = async (req, res) => {\n    let updatedListing = req.body.listing;\n    if(!req.body.listing) {\n        throw new Express(400, \"Send valid data for listing\");\n    }\n    let { id } = req.params;\n    let listing = await Listing.findByIdAndUpdate(id, updatedListing, { runValidators: true });\n    \n    if(typeof req.file !== \"undefined\") {\n        let url = req.file.path;\n        let filename = req.file.filename;\n        listing.image = { url, filename };\n        await listing.save();\n    }\n    req.flash(\"success\", \"Listing Updated!\");\n    res.redirect(`/listings/${id}`);\n};\n\nmodule.exports.destroyListing = async (req, res) => {\n    let { id } = req.params;\n    let deletedListing = await Listing.findByIdAndDelete(id);\n    console.log(deletedListing);\n    req.flash(\"success\", \"Listing Deleted\");\n    res.redirect(\"/listings\");\n};","size_bytes":2314},"app.js":{"content":"if(process.env.NODE_ENV != \"production\") {\n    require(\"dotenv\").config();\n}\n\nconst express = require(\"express\");\nconst app = express();\nconst mongoose = require(\"mongoose\");\nconst path = require(\"path\");\nconst methodOverride = require(\"method-override\");\nconst ejsMate = require(\"ejs-mate\");\nconst ExpressError = require(\"./utils/ExpressError.js\");\nconst session = require(\"express-session\");\nconst flash = require(\"connect-flash\")\nconst passport = require(\"passport\");\nconst LocalStrategy = require(\"passport-local\");\nconst User = require(\"./models/user.js\");\n\nconst eventRouter = require(\"./routes/event.js\");\nconst feedbackRouter = require(\"./routes/feedback.js\");\nconst userRouter = require(\"./routes/user.js\");\nconst adminRouter = require(\"./routes/admin.js\");\n\napp.set(\"view engine\", \"ejs\");\napp.set(\"views\", path.join(__dirname, \"views\"));\napp.use(express.static(path.join(__dirname, \"public\")));\napp.use(express.urlencoded({ extended: true }));\napp.use(methodOverride(\"_method\"));\napp.engine(\"ejs\", ejsMate);\n\nconst MONGO_URL = process.env.MONGO_URL || \"mongodb://127.0.0.1:27017/nexus_nitw\";\n\nmain()\n    .then(() => {\n        console.log(\"connected to DB\");\n    })\n    .catch((err) => {\n        console.log(err);\n    });\n\nasync function main() {\n    await mongoose.connect(MONGO_URL);\n}\n\nconst sessionOptions = {\n    secret: process.env.SESSION_SECRET || \"mysupersecretcode\",\n    resave: false,\n    saveUninitialized: true,\n    cookie: {\n        expires: Date.now() + 7 * 24 * 60 * 60 * 1000,\n        maxAge: 7 * 24 * 60 * 60 * 1000,\n        httpOnly: true\n    }\n};\n\napp.get(\"/\", (req, res) => {\n    res.redirect(\"/events\");\n});\n\napp.use(session(sessionOptions));\napp.use(flash());\n\napp.use(passport.initialize());\napp.use(passport.session());\npassport.use(new LocalStrategy(User.authenticate()));\n\npassport.serializeUser(User.serializeUser());\npassport.deserializeUser(User.deserializeUser());\n\napp.use((req, res, next) => {\n    res.locals.success = req.flash(\"success\");\n    res.locals.error = req.flash(\"error\");\n    res.locals.currUser = req.user;\n    next();\n});\n\napp.use(\"/events\", eventRouter);\napp.use(\"/events/:id/feedbacks\", feedbackRouter);\napp.use(\"/admin\", adminRouter);\napp.use(\"/\", userRouter);\n\napp.use((req, res, next) => {\n    next(new ExpressError(404, \"Page Not Found!\"));\n});\n\napp.use((err, req, res, next) => {\n    let { statusCode = 500, message = \"Something went wrong!\" } = err;\n    res.status(statusCode).render(\"error\", { message });\n    //res.status(statusCode).send(message);\n});\n\nconst PORT = process.env.PORT || 5000;\nconst HOST = \"0.0.0.0\";\n\napp.listen(PORT, HOST, () => {\n    console.log(`server is listening on ${HOST}:${PORT}`);\n});","size_bytes":2677},"routes/listing.js":{"content":"const express = require(\"express\");\nconst router = express.Router();\nconst wrapAsync = require(\"../utils/wrapAsync.js\");\nconst { listingSchema } = require(\"../schema.js\");\nconst ExpressError = require(\"../utils/ExpressError.js\");\nconst Listing = require(\"../models/listing.js\");\nconst { isLoggedIn, isOwner, validateListing } = require(\"../middleware.js\");\nconst listingController = require(\"../controllers/listings.js\");\nconst multer = require(\"multer\");\nconst { storage } = require(\"../cloudConfig.js\");\nconst upload = multer({ storage });\n\nrouter\n    .route(\"/\")\n    .get(wrapAsync(listingController.index))   //Index Route\n    .post(                                     //Create Route\n        isLoggedIn,\n        validateListing,\n        upload.single(\"listing[image]\"),\n        wrapAsync(listingController.createListing)\n    );\n\n//New Route - put this above show route to avoid new being treated as an id\nrouter.get(\"/new\",\n    isLoggedIn,\n    listingController.renderNewForm\n);\n    \nrouter\n    .route(\"/:id\")\n    .get(                                 //Show Route\n        wrapAsync(listingController.showListing)\n    )\n    .put(                                //Update Route\n        isLoggedIn,\n        isOwner,\n        upload.single(\"listing[image]\"),\n        wrapAsync(listingController.updateListing),\n        validateListing,\n    )\n    .delete(                             //Destroy Route\n        isLoggedIn,\n        isOwner,\n        wrapAsync(listingController.destroyListing)\n    );\n\n//Edit Route\nrouter.get(\"/:id/edit\",\n    isLoggedIn,\n    isOwner,\n    wrapAsync(listingController.renderEditForm)\n);\n\nmodule.exports = router;","size_bytes":1638},"init/index.js":{"content":"const mongoose = require(\"mongoose\");\nconst initData = require(\"./data.js\");\nconst Listing = require(\"../models/listing.js\");\n\nconst MONGO_URL = \"mongodb://127.0.0.1:27017/wandernest\";\n\nmain().then(() => {\n    console.log(\"connected to DB\");\n})\n.catch(err => {\n    console.log(err);\n});\n\nasync function main() {\n    await mongoose.connect(MONGO_URL);\n}\n\nconst initDB = async () => {\n    await Listing.deleteMany({});\n    initData.data = initData.data.map(obj => ({...obj, owner: '6866c04866246a29bed87d19'}))\n    await Listing.insertMany(initData.data);\n    console.log(\"data was initialised\");\n}\n\ninitDB();","size_bytes":607},"cloudConfig.js":{"content":"const cloudinary = require(\"cloudinary\").v2;\nconst { CloudinaryStorage } = require(\"multer-storage-cloudinary\");\n\ncloudinary.config({\n    cloud_name: process.env.CLOUD_NAME,\n    api_key: process.env.CLOUD_API_KEY,\n    api_secret: process.env.CLOUD_API_SECRET\n});\n\nconst storage = new CloudinaryStorage({\n    cloudinary: cloudinary,\n    params: {\n        folder: \"wandernest_DEV\",\n        allowedFormat: [\"png\", \"jpg\", \"jpeg\"]\n    }\n});\n\nmodule.exports = {\n    cloudinary,\n    storage\n}","size_bytes":485},"routes/review.js":{"content":"const express = require(\"express\");\nconst router = express.Router({ mergeParams: true });\nconst wrapAsync = require(\"../utils/wrapAsync.js\");\nconst { reviewSchema } = require(\"../schema.js\");\nconst Review = require(\"../models/review.js\");\nconst Listing = require(\"../models/listing.js\");\nconst { validateReview, isLoggedIn, isReviewAuthor } = require(\"../middleware.js\");\nconst reviewController = require(\"../controllers/reviews.js\");\n\n//Reviews\n//Create Route\nrouter.post(\"/\",\n    isLoggedIn,\n    validateReview,\n    wrapAsync(reviewController.createReview)\n);\n\n//Destroy Review Route\nrouter.delete(\"/:reviewId\",\n    isLoggedIn,\n    isReviewAuthor,\n    wrapAsync(reviewController.destroyReview)\n);\n\nmodule.exports = router;","size_bytes":724},"controllers/users.js":{"content":"const User = require(\"../models/user.js\");\n\nmodule.exports.renderSignupForm = (req, res) => {\n    res.render(\"users/signup\");\n};\n\nmodule.exports.renderLoginForm = (req, res) => {\n    res.render(\"users/login\");\n};\n\nmodule.exports.signup = async (req, res) => {\n        try {\n            let { username, email, password, role } = req.body;\n            const newUser = new User({email, username, role: role || 'Student'});\n            const registeredUser = await User.register(newUser, password);\n            console.log(registeredUser);\n            req.login(registeredUser, (err) => {\n                if(err) {\n                    return next(err);\n                }\n                req.flash(\"success\", \"Welcome to Nexus NITW\");\n                res.redirect(\"/events\");\n            });\n        } catch(err) {\n            req.flash(\"error\", err.message);\n            res.redirect(\"/signup\");\n        }\n};\n\nmodule.exports.postLogin = async (req, res) => {\n    req.flash(\"success\", \"Welcome back to Nexus NITW! You are now logged in\");\n    let redirectUrl = res.locals.redirectUrl || \"/events\";\n    res.redirect(redirectUrl);\n};\n\nmodule.exports.logout = (req, res, next) => {\n    req.logout((err) => {\n        if(err) {\n            return next(err);\n        }\n        req.flash(\"success\", \"You are logged out!\");\n        res.redirect(\"/events\");\n    });\n};","size_bytes":1354},"middleware.js":{"content":"const Event = require(\"./models/event.js\");\nconst Feedback = require(\"./models/feedback.js\");\nconst { eventSchema, feedbackSchema } = require(\"./schema.js\");\nconst ExpressError = require(\"./utils/ExpressError.js\");\n\nmodule.exports.isLoggedIn = (req, res, next) => {\n    if(!req.isAuthenticated()) {\n        req.session.redirectUrl = req.originalUrl;\n        req.flash(\"error\", \"You must be logged in to access this page\");\n        return res.redirect(\"/login\");\n    }\n    next();\n}\n\nmodule.exports.saveRedirectUrl = (req, res, next) => {\n    if(req.session.redirectUrl) {\n        res.locals.redirectUrl = req.session.redirectUrl;\n    }\n    next();\n}\n\nmodule.exports.isClubAdmin = (req, res, next) => {\n    if(!req.isAuthenticated() || req.user.role !== 'ClubAdmin') {\n        req.flash(\"error\", \"You must be a Club Admin to perform this action\");\n        return res.redirect(\"/events\");\n    }\n    next();\n}\n\nmodule.exports.isSystemAdmin = (req, res, next) => {\n    if(!req.isAuthenticated() || req.user.role !== 'SystemAdmin') {\n        req.flash(\"error\", \"You must be a System Admin to perform this action\");\n        return res.redirect(\"/events\");\n    }\n    next();\n}\n\nmodule.exports.isStudent = (req, res, next) => {\n    if(!req.isAuthenticated() || req.user.role !== 'Student') {\n        req.flash(\"error\", \"You must be a Student to perform this action\");\n        return res.redirect(\"/events\");\n    }\n    next();\n}\n\nmodule.exports.isEventCreator = async (req, res, next) => {\n    let { id } = req.params;\n    let event = await Event.findById(id);\n    if(!event) {\n        req.flash(\"error\", \"Event not found!\");\n        return res.redirect(\"/events\");\n    }\n    if(!event.createdBy._id.equals(req.user._id)) {\n        req.flash(\"error\", \"You are not authorized to modify this event!\");\n        return res.redirect(`/events/${id}`);\n    }\n    next();\n}\n\nmodule.exports.isFeedbackAuthor = async (req, res, next) => {\n    let { id, feedbackId } = req.params;\n    let feedback = await Feedback.findById(feedbackId);\n    if(!feedback) {\n        req.flash(\"error\", \"Feedback not found!\");\n        return res.redirect(`/events/${id}`);\n    }\n    if(!req.user._id.equals(feedback.author._id)) {\n        req.flash(\"error\", \"You are not authorized to modify this feedback\");\n        return res.redirect(`/events/${id}`);\n    }\n    next();\n}\n\nmodule.exports.validateEvent = (req, res, next) => {\n    let { error } = eventSchema.validate(req.body);\n    if (error) {\n        let errMsg = error.details.map(el => el.message).join(\",\");\n        throw new ExpressError(400, errMsg);\n    } else {\n        next();\n    }\n}\n\nmodule.exports.validateFeedback = (req, res, next) => {\n    let { error } = feedbackSchema.validate(req.body);\n    if (error) {\n        let errMsg = error.details.map(el => el.message).join(\",\");\n        throw new ExpressError(400, errMsg);\n    } else {\n        next();\n    }\n}\n","size_bytes":2888},"public/js/script.js":{"content":"// Example starter JavaScript for disabling form submissions if there are invalid fields\n(() => {\n    'use strict'\n  \n    // Fetch all the forms we want to apply custom Bootstrap validation styles to\n    const forms = document.querySelectorAll('.needs-validation')\n  \n    // Loop over them and prevent submission\n    Array.from(forms).forEach(form => {\n      form.addEventListener('submit', event => {\n        if (!form.checkValidity()) {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n  \n        form.classList.add('was-validated')\n      }, false)\n    })\n  })()","size_bytes":592},"public/css/rating.css":{"content":".starability-result {\n    position: relative;\n    width: 150px;\n    height: 30px;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAA8CAMAAABGivqtAAAAxlBMVEUAAACZmZn2viTHuJ72viOampqampr1viSampr3vySampqdnZ34wiX1vSSampr1vSOZmZmampr1viT2vSOampr2viT2viSampr2viSampr2vyX4vyWbm5v3vSSdnZ32wSadnZ36wCWcnJyZmZn/wSr/2ySampr2vSP2viSZmZn2vSSZmZn2vST2viSampr2viSbm5ubm5uZmZn1vSSampqbm5v2vSWampqampr3vSf5wiT5vyagoKD/xCmkpKT/yCSZmZn1vSO4V2dEAAAAQHRSTlMA+vsG9fO6uqdgRSIi7+3q39XVqZWVgnJyX09HPDw1NTAwKRkYB+jh3L6+srKijY2Ef2lpYllZUU5CKigWFQ4Oneh1twAAAZlJREFUOMuV0mdzAiEQBmDgWq4YTWIvKRqT2Htv8P//VJCTGfYQZnw/3fJ4tyO76KE0m1b2fZu+U/pu4QGlA7N+Up5PIz9d+cmkbSrSNr9seT3GKeNYIyeO5j16S28exY5suK0U/QKmmeCCX6xs22hJLVkitMImxCvEs8EG3SCRCN/ViFPqnq5epIzZ07QJJvkM9Tkz1xnkmXbfSvR7f4H8AtXBkLGj74mMvjM1+VHZpAZ4LM4K/LBWEI9jwP71v1ZEQ6dyvQMf8A/1pmdZnKce/VH1iIsdte4U8VEtY23xOujxtFpWDgKbfjD2YeEhY0OzfjGeLyO/XfnNpAcmcjDwKOXRfU1IyiTRyEkaiz67pb9oJHJb9vVqKfgjLBPyF5Sq9T0KmSUhQmtiQrJGPHVi0DoSabj31G2gW3buHd0pY85lNdcCk8xlNDPXMuSyNiwl+theIb9C7RLIpKvviYy+M6H8qGwSAp6Is19+GP6KxwnggJ/kq6Jht5rnRQA4z9zyRRaXssvyqp5I6Vutv0vkpJaJtnjpz/8B19ytIayazLoAAAAASUVORK5CYII=\");\n    font-size: 0.1em;\n    color: transparent;\n  }\n  \n  .starability-result:after {\n    content: ' ';\n    position: absolute;\n    left: 0;\n    height: 30px;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAA8CAMAAABGivqtAAAAxlBMVEUAAACZmZn2viTHuJ72viOampqampr1viSampr3vySampqdnZ34wiX1vSSampr1vSOZmZmampr1viT2vSOampr2viT2viSampr2viSampr2vyX4vyWbm5v3vSSdnZ32wSadnZ36wCWcnJyZmZn/wSr/2ySampr2vSP2viSZmZn2vSSZmZn2vST2viSampr2viSbm5ubm5uZmZn1vSSampqbm5v2vSWampqampr3vSf5wiT5vyagoKD/xCmkpKT/yCSZmZn1vSO4V2dEAAAAQHRSTlMA+vsG9fO6uqdgRSIi7+3q39XVqZWVgnJyX09HPDw1NTAwKRkYB+jh3L6+srKijY2Ef2lpYllZUU5CKigWFQ4Oneh1twAAAZlJREFUOMuV0mdzAiEQBmDgWq4YTWIvKRqT2Htv8P//VJCTGfYQZnw/3fJ4tyO76KE0m1b2fZu+U/pu4QGlA7N+Up5PIz9d+cmkbSrSNr9seT3GKeNYIyeO5j16S28exY5suK0U/QKmmeCCX6xs22hJLVkitMImxCvEs8EG3SCRCN/ViFPqnq5epIzZ07QJJvkM9Tkz1xnkmXbfSvR7f4H8AtXBkLGj74mMvjM1+VHZpAZ4LM4K/LBWEI9jwP71v1ZEQ6dyvQMf8A/1pmdZnKce/VH1iIsdte4U8VEtY23xOujxtFpWDgKbfjD2YeEhY0OzfjGeLyO/XfnNpAcmcjDwKOXRfU1IyiTRyEkaiz67pb9oJHJb9vVqKfgjLBPyF5Sq9T0KmSUhQmtiQrJGPHVi0DoSabj31G2gW3buHd0pY85lNdcCk8xlNDPXMuSyNiwl+theIb9C7RLIpKvviYy+M6H8qGwSAp6Is19+GP6KxwnggJ/kq6Jht5rnRQA4z9zyRRaXssvyqp5I6Vutv0vkpJaJtnjpz/8B19ytIayazLoAAAAASUVORK5CYII=\");\n    background-position: 0 -30px;\n  }\n  \n  .starability-result[data-rating=\"5\"]::after {\n    width: 150px;\n  }\n  \n  .starability-result[data-rating=\"4\"]::after {\n    width: 120px;\n  }\n  \n  .starability-result[data-rating=\"3\"]::after {\n    width: 90px;\n  }\n  \n  .starability-result[data-rating=\"2\"]::after {\n    width: 60px;\n  }\n  \n  .starability-result[data-rating=\"1\"]::after {\n    width: 30px;\n  }\n  \n  @media screen and (-webkit-min-device-pixel-ratio: 2), screen and (min-resolution: 192dpi) {\n    .starability-result {\n      background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAB4CAMAAACZ62E6AAABAlBMVEUAAACZmZmampr2vSObm5v/yiufn5+ampr1viP1viSZmZn2viOZmZmampqampr2viSampqampqcnJz5vyScnJz3wSf/wyn/xiujo6Oqqqr/0C/1vSOampr2viP2viOampr2viP2vST2viOampqampqampr1vyP3viSampr2vyT4vyX3viSbm5ubm5v5wCT8xSmgoKCampqampr3vyb2wiWenp72viOampqZmZmampr2viP2viP1viSampqbm5v2vyT3viObm5v4vyadnZ34wSSbm5v2viSZmZn2viP2vST2viP2viT1viOZmZn2viT2viX3viT3vyb2vyOZmZn1vSOZmZlNN+fKAAAAVHRSTlMA9uz4PQwS8O7r5+fTw4yMelw2MB0dFRELBgbS+/Hfu7uxqKWdg4N7ZmZMPi8pKRgPs0w7Nhb14drKw6Gck21tXkNDIyMZ1rDLycTBtaqVknlfV0sGP8ZwAAADW0lEQVRYw9zWvYqDQBSG4TPDoCAqKhYKQgoVLFaIgZCkiCBBUqVazv3fyu4aEXWdM85Uy779A+LP58AfTQgw73AwtxFiZIwbxMbUfuB3H4b49YNfZrbGodoI52+cm9hH9sbZwwAXOFbo2zjDsSzWxnecuuvaM8MpdtbEPs7y9azF5phZWrjERaWOPdpLbB81cICrgv3W4mvMLbU6RmFQeA5u5HhFEEbHLdWLsMxvHJXxW16Goh+ZqPyny1Az5j79SsCJoWHsBNAxQ9sNF26bWFuMC8v1LY+mmeTadjaqtaNnnXoxWBcde1nNWnzdb68xrOqvu22/MTzuPutujpJ122NvluSb8tTWk85CclDZQwLS0oa2TQpEKacsJy0kSJaQOKJxROKKxhWJ7zS+k9ijsUdim8Y2ZWNUFBP4pMKfOv8onX9WrsI5gd3VVLXtatxcuU0znGUHCUAS2DgrS6mT6hTzrXEjfIZj5Dk2xKkihqm4wKlQfQRqalhUP9UHo3FIPAG/Et44JVLsDDf0JHmB3OEByOwZES8hSAsviGjBdh3ylh6plmMnW4IyAUVJWcE/76vTell1EIaiMBwIAcWBA9GC0lIdKFXQQUsHVVCklN7ojf3+z3JOxYqK2TH555+K6CJJQtRbr9XtDmCnjH0AX9Va8J+liIMvDtRsCk2pEs6hKVexR2g7KuDihwt5a9MfprY0fkLXU9ZmFLpoJolN6GXKWWfZx0tHCocwKJSxC22ItYUEjmBUJHFjfYz1xQxlfaLiZsBExq2IPtbkNbLtOwwuGgjTLkH43mYtSzam7+1Bsr3nm5uExBQUozEh9V7N7uvmwZcqdpm0C6vJW63bZEuXtbrV2zpDzhrpYLBWMnY1mjV7JWFtMio7zbWniWFxvHnWm1yGxXmOPXP+L3YV2ysjnNhaZNeMcHPvuL27BMnVMaujljBAYyje4niH4g2ONyh+4PiB4gOODyjWcKxh1gZBNoJjEY4R/BLhF4IDEQ4QPBoEoyxH4+bxrUsHyxwxQlg0WHXqYifVLmo67cKY/UtaXFxBV26TLjuHrkp8BPJTMij1xQejdkgO24nf7dBOCRcbzQuNOR9Qs64GzzrfQa8It2oFAA6Zrga9xEeq1KHmLUHIiCAWInsg1x/MLqkMsItF8QAAAABJRU5ErkJggg==\");\n      background-size: 30px auto;\n    }\n    .starability-result:after {\n      background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAB4CAMAAACZ62E6AAABAlBMVEUAAACZmZmampr2vSObm5v/yiufn5+ampr1viP1viSZmZn2viOZmZmampqampr2viSampqampqcnJz5vyScnJz3wSf/wyn/xiujo6Oqqqr/0C/1vSOampr2viP2viOampr2viP2vST2viOampqampqampr1vyP3viSampr2vyT4vyX3viSbm5ubm5v5wCT8xSmgoKCampqampr3vyb2wiWenp72viOampqZmZmampr2viP2viP1viSampqbm5v2vyT3viObm5v4vyadnZ34wSSbm5v2viSZmZn2viP2vST2viP2viT1viOZmZn2viT2viX3viT3vyb2vyOZmZn1vSOZmZlNN+fKAAAAVHRSTlMA9uz4PQwS8O7r5+fTw4yMelw2MB0dFRELBgbS+/Hfu7uxqKWdg4N7ZmZMPi8pKRgPs0w7Nhb14drKw6Gck21tXkNDIyMZ1rDLycTBtaqVknlfV0sGP8ZwAAADW0lEQVRYw9zWvYqDQBSG4TPDoCAqKhYKQgoVLFaIgZCkiCBBUqVazv3fyu4aEXWdM85Uy779A+LP58AfTQgw73AwtxFiZIwbxMbUfuB3H4b49YNfZrbGodoI52+cm9hH9sbZwwAXOFbo2zjDsSzWxnecuuvaM8MpdtbEPs7y9azF5phZWrjERaWOPdpLbB81cICrgv3W4mvMLbU6RmFQeA5u5HhFEEbHLdWLsMxvHJXxW16Goh+ZqPyny1Az5j79SsCJoWHsBNAxQ9sNF26bWFuMC8v1LY+mmeTadjaqtaNnnXoxWBcde1nNWnzdb68xrOqvu22/MTzuPutujpJ122NvluSb8tTWk85CclDZQwLS0oa2TQpEKacsJy0kSJaQOKJxROKKxhWJ7zS+k9ijsUdim8Y2ZWNUFBP4pMKfOv8onX9WrsI5gd3VVLXtatxcuU0znGUHCUAS2DgrS6mT6hTzrXEjfIZj5Dk2xKkihqm4wKlQfQRqalhUP9UHo3FIPAG/Et44JVLsDDf0JHmB3OEByOwZES8hSAsviGjBdh3ylh6plmMnW4IyAUVJWcE/76vTell1EIaiMBwIAcWBA9GC0lIdKFXQQUsHVVCklN7ojf3+z3JOxYqK2TH555+K6CJJQtRbr9XtDmCnjH0AX9Va8J+liIMvDtRsCk2pEs6hKVexR2g7KuDihwt5a9MfprY0fkLXU9ZmFLpoJolN6GXKWWfZx0tHCocwKJSxC22ItYUEjmBUJHFjfYz1xQxlfaLiZsBExq2IPtbkNbLtOwwuGgjTLkH43mYtSzam7+1Bsr3nm5uExBQUozEh9V7N7uvmwZcqdpm0C6vJW63bZEuXtbrV2zpDzhrpYLBWMnY1mjV7JWFtMio7zbWniWFxvHnWm1yGxXmOPXP+L3YV2ysjnNhaZNeMcHPvuL27BMnVMaujljBAYyje4niH4g2ONyh+4PiB4gOODyjWcKxh1gZBNoJjEY4R/BLhF4IDEQ4QPBoEoyxH4+bxrUsHyxwxQlg0WHXqYifVLmo67cKY/UtaXFxBV26TLjuHrkp8BPJTMij1xQejdkgO24nf7dBOCRcbzQuNOR9Qs64GzzrfQa8It2oFAA6Zrga9xEeq1KHmLUHIiCAWInsg1x/MLqkMsItF8QAAAABJRU5ErkJggg==\");\n      background-size: 30px auto;\n    }\n  }\n  \n  @-webkit-keyframes grow {\n    0% {\n      -webkit-transform: scale(1, 1);\n              transform: scale(1, 1);\n    }\n    70% {\n      -webkit-transform: scale(3, 3);\n              transform: scale(3, 3);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: scale(1, 1);\n              transform: scale(1, 1);\n      opacity: 0;\n    }\n  }\n  \n  @keyframes grow {\n    0% {\n      -webkit-transform: scale(1, 1);\n              transform: scale(1, 1);\n    }\n    70% {\n      -webkit-transform: scale(3, 3);\n              transform: scale(3, 3);\n      opacity: 0;\n    }\n    100% {\n      -webkit-transform: scale(1, 1);\n              transform: scale(1, 1);\n      opacity: 0;\n    }\n  }\n  \n  .starability-grow {\n    display: block;\n    position: relative;\n    width: 150px;\n    min-height: 60px;\n    padding: 0;\n    border: none;\n    will-change: contents;\n  }\n  \n  .starability-grow > input {\n    position: absolute;\n    margin-right: -100%;\n    opacity: 0;\n  }\n  \n  .starability-grow > input:checked ~ label,\n  .starability-grow > input:focus ~ label {\n    background-position: 0 0;\n  }\n  \n  .starability-grow > input:checked + label,\n  .starability-grow > input:focus + label {\n    background-position: 0 -30px;\n  }\n  \n  .starability-grow > input[disabled]:hover + label {\n    cursor: default;\n  }\n  \n  .starability-grow > input:not([disabled]):hover ~ label {\n    background-position: 0 0;\n  }\n  \n  .starability-grow > input:not([disabled]):hover + label {\n    background-position: 0 -30px;\n  }\n  \n  .starability-grow > input:not([disabled]):hover + label::before {\n    opacity: 1;\n  }\n  \n  .starability-grow > input:focus + label {\n    outline: 1px dotted #999;\n  }\n  \n  .starability-grow .starability-focus-ring {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 30px;\n    outline: 2px dotted #999;\n    pointer-events: none;\n    opacity: 0;\n  }\n  \n  .starability-grow > .input-no-rate:focus ~ .starability-focus-ring {\n    opacity: 1;\n  }\n  \n  .starability-grow > label {\n    position: relative;\n    display: inline-block;\n    float: left;\n    width: 30px;\n    height: 30px;\n    font-size: 0.1em;\n    color: transparent;\n    cursor: pointer;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAA8CAMAAABGivqtAAAAxlBMVEUAAACZmZn2viTHuJ72viOampqampr1viSampr3vySampqdnZ34wiX1vSSampr1vSOZmZmampr1viT2vSOampr2viT2viSampr2viSampr2vyX4vyWbm5v3vSSdnZ32wSadnZ36wCWcnJyZmZn/wSr/2ySampr2vSP2viSZmZn2vSSZmZn2vST2viSampr2viSbm5ubm5uZmZn1vSSampqbm5v2vSWampqampr3vSf5wiT5vyagoKD/xCmkpKT/yCSZmZn1vSO4V2dEAAAAQHRSTlMA+vsG9fO6uqdgRSIi7+3q39XVqZWVgnJyX09HPDw1NTAwKRkYB+jh3L6+srKijY2Ef2lpYllZUU5CKigWFQ4Oneh1twAAAZlJREFUOMuV0mdzAiEQBmDgWq4YTWIvKRqT2Htv8P//VJCTGfYQZnw/3fJ4tyO76KE0m1b2fZu+U/pu4QGlA7N+Up5PIz9d+cmkbSrSNr9seT3GKeNYIyeO5j16S28exY5suK0U/QKmmeCCX6xs22hJLVkitMImxCvEs8EG3SCRCN/ViFPqnq5epIzZ07QJJvkM9Tkz1xnkmXbfSvR7f4H8AtXBkLGj74mMvjM1+VHZpAZ4LM4K/LBWEI9jwP71v1ZEQ6dyvQMf8A/1pmdZnKce/VH1iIsdte4U8VEtY23xOujxtFpWDgKbfjD2YeEhY0OzfjGeLyO/XfnNpAcmcjDwKOXRfU1IyiTRyEkaiz67pb9oJHJb9vVqKfgjLBPyF5Sq9T0KmSUhQmtiQrJGPHVi0DoSabj31G2gW3buHd0pY85lNdcCk8xlNDPXMuSyNiwl+theIb9C7RLIpKvviYy+M6H8qGwSAp6Is19+GP6KxwnggJ/kq6Jht5rnRQA4z9zyRRaXssvyqp5I6Vutv0vkpJaJtnjpz/8B19ytIayazLoAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat;\n    background-position: 0 -30px;\n  }\n  \n  .starability-grow > label::before {\n    content: '';\n    position: absolute;\n    display: block;\n    height: 30px;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAA8CAMAAABGivqtAAAAxlBMVEUAAACZmZn2viTHuJ72viOampqampr1viSampr3vySampqdnZ34wiX1vSSampr1vSOZmZmampr1viT2vSOampr2viT2viSampr2viSampr2vyX4vyWbm5v3vSSdnZ32wSadnZ36wCWcnJyZmZn/wSr/2ySampr2vSP2viSZmZn2vSSZmZn2vST2viSampr2viSbm5ubm5uZmZn1vSSampqbm5v2vSWampqampr3vSf5wiT5vyagoKD/xCmkpKT/yCSZmZn1vSO4V2dEAAAAQHRSTlMA+vsG9fO6uqdgRSIi7+3q39XVqZWVgnJyX09HPDw1NTAwKRkYB+jh3L6+srKijY2Ef2lpYllZUU5CKigWFQ4Oneh1twAAAZlJREFUOMuV0mdzAiEQBmDgWq4YTWIvKRqT2Htv8P//VJCTGfYQZnw/3fJ4tyO76KE0m1b2fZu+U/pu4QGlA7N+Up5PIz9d+cmkbSrSNr9seT3GKeNYIyeO5j16S28exY5suK0U/QKmmeCCX6xs22hJLVkitMImxCvEs8EG3SCRCN/ViFPqnq5epIzZ07QJJvkM9Tkz1xnkmXbfSvR7f4H8AtXBkLGj74mMvjM1+VHZpAZ4LM4K/LBWEI9jwP71v1ZEQ6dyvQMf8A/1pmdZnKce/VH1iIsdte4U8VEtY23xOujxtFpWDgKbfjD2YeEhY0OzfjGeLyO/XfnNpAcmcjDwKOXRfU1IyiTRyEkaiz67pb9oJHJb9vVqKfgjLBPyF5Sq9T0KmSUhQmtiQrJGPHVi0DoSabj31G2gW3buHd0pY85lNdcCk8xlNDPXMuSyNiwl+theIb9C7RLIpKvviYy+M6H8qGwSAp6Is19+GP6KxwnggJ/kq6Jht5rnRQA4z9zyRRaXssvyqp5I6Vutv0vkpJaJtnjpz/8B19ytIayazLoAAAAASUVORK5CYII=\");\n    background-position: 0 30px;\n    pointer-events: none;\n    opacity: 0;\n  }\n  \n  .starability-grow > label:nth-of-type(5)::before {\n    width: 120px;\n    left: -120px;\n  }\n  \n  .starability-grow > label:nth-of-type(4)::before {\n    width: 90px;\n    left: -90px;\n  }\n  \n  .starability-grow > label:nth-of-type(3)::before {\n    width: 60px;\n    left: -60px;\n  }\n  \n  .starability-grow > label:nth-of-type(2)::before {\n    width: 30px;\n    left: -30px;\n  }\n  \n  .starability-grow > label:nth-of-type(1)::before {\n    width: 0px;\n    left: 0px;\n  }\n  \n  @media screen and (-webkit-min-device-pixel-ratio: 2), screen and (min-resolution: 192dpi) {\n    .starability-grow > label {\n      background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAB4CAMAAACZ62E6AAABAlBMVEUAAACZmZmampr2vSObm5v/yiufn5+ampr1viP1viSZmZn2viOZmZmampqampr2viSampqampqcnJz5vyScnJz3wSf/wyn/xiujo6Oqqqr/0C/1vSOampr2viP2viOampr2viP2vST2viOampqampqampr1vyP3viSampr2vyT4vyX3viSbm5ubm5v5wCT8xSmgoKCampqampr3vyb2wiWenp72viOampqZmZmampr2viP2viP1viSampqbm5v2vyT3viObm5v4vyadnZ34wSSbm5v2viSZmZn2viP2vST2viP2viT1viOZmZn2viT2viX3viT3vyb2vyOZmZn1vSOZmZlNN+fKAAAAVHRSTlMA9uz4PQwS8O7r5+fTw4yMelw2MB0dFRELBgbS+/Hfu7uxqKWdg4N7ZmZMPi8pKRgPs0w7Nhb14drKw6Gck21tXkNDIyMZ1rDLycTBtaqVknlfV0sGP8ZwAAADW0lEQVRYw9zWvYqDQBSG4TPDoCAqKhYKQgoVLFaIgZCkiCBBUqVazv3fyu4aEXWdM85Uy779A+LP58AfTQgw73AwtxFiZIwbxMbUfuB3H4b49YNfZrbGodoI52+cm9hH9sbZwwAXOFbo2zjDsSzWxnecuuvaM8MpdtbEPs7y9azF5phZWrjERaWOPdpLbB81cICrgv3W4mvMLbU6RmFQeA5u5HhFEEbHLdWLsMxvHJXxW16Goh+ZqPyny1Az5j79SsCJoWHsBNAxQ9sNF26bWFuMC8v1LY+mmeTadjaqtaNnnXoxWBcde1nNWnzdb68xrOqvu22/MTzuPutujpJ122NvluSb8tTWk85CclDZQwLS0oa2TQpEKacsJy0kSJaQOKJxROKKxhWJ7zS+k9ijsUdim8Y2ZWNUFBP4pMKfOv8onX9WrsI5gd3VVLXtatxcuU0znGUHCUAS2DgrS6mT6hTzrXEjfIZj5Dk2xKkihqm4wKlQfQRqalhUP9UHo3FIPAG/Et44JVLsDDf0JHmB3OEByOwZES8hSAsviGjBdh3ylh6plmMnW4IyAUVJWcE/76vTell1EIaiMBwIAcWBA9GC0lIdKFXQQUsHVVCklN7ojf3+z3JOxYqK2TH555+K6CJJQtRbr9XtDmCnjH0AX9Va8J+liIMvDtRsCk2pEs6hKVexR2g7KuDihwt5a9MfprY0fkLXU9ZmFLpoJolN6GXKWWfZx0tHCocwKJSxC22ItYUEjmBUJHFjfYz1xQxlfaLiZsBExq2IPtbkNbLtOwwuGgjTLkH43mYtSzam7+1Bsr3nm5uExBQUozEh9V7N7uvmwZcqdpm0C6vJW63bZEuXtbrV2zpDzhrpYLBWMnY1mjV7JWFtMio7zbWniWFxvHnWm1yGxXmOPXP+L3YV2ysjnNhaZNeMcHPvuL27BMnVMaujljBAYyje4niH4g2ONyh+4PiB4gOODyjWcKxh1gZBNoJjEY4R/BLhF4IDEQ4QPBoEoyxH4+bxrUsHyxwxQlg0WHXqYifVLmo67cKY/UtaXFxBV26TLjuHrkp8BPJTMij1xQejdkgO24nf7dBOCRcbzQuNOR9Qs64GzzrfQa8It2oFAA6Zrga9xEeq1KHmLUHIiCAWInsg1x/MLqkMsItF8QAAAABJRU5ErkJggg==\");\n      background-size: 30px auto;\n    }\n  }\n  \n  @media screen and (-ms-high-contrast: active) {\n    .starability-grow {\n      width: auto;\n    }\n    .starability-grow > input {\n      position: static;\n      margin-right: 0;\n      opacity: 1;\n    }\n    .starability-grow .input-no-rate {\n      display: none;\n    }\n    .starability-grow > label {\n      display: inline;\n      float: none;\n      width: auto;\n      height: auto;\n      font-size: 1em;\n      color: inherit;\n      background: none;\n    }\n    .starability-grow > label::before, .starability-grow > label::after {\n      display: none;\n    }\n  }\n  \n  .starability-grow > label::after {\n    content: ' ';\n    position: absolute;\n    opacity: 0;\n    width: 30px;\n    height: 30px;\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAA8CAMAAABGivqtAAAAxlBMVEUAAACZmZn2viTHuJ72viOampqampr1viSampr3vySampqdnZ34wiX1vSSampr1vSOZmZmampr1viT2vSOampr2viT2viSampr2viSampr2vyX4vyWbm5v3vSSdnZ32wSadnZ36wCWcnJyZmZn/wSr/2ySampr2vSP2viSZmZn2vSSZmZn2vST2viSampr2viSbm5ubm5uZmZn1vSSampqbm5v2vSWampqampr3vSf5wiT5vyagoKD/xCmkpKT/yCSZmZn1vSO4V2dEAAAAQHRSTlMA+vsG9fO6uqdgRSIi7+3q39XVqZWVgnJyX09HPDw1NTAwKRkYB+jh3L6+srKijY2Ef2lpYllZUU5CKigWFQ4Oneh1twAAAZlJREFUOMuV0mdzAiEQBmDgWq4YTWIvKRqT2Htv8P//VJCTGfYQZnw/3fJ4tyO76KE0m1b2fZu+U/pu4QGlA7N+Up5PIz9d+cmkbSrSNr9seT3GKeNYIyeO5j16S28exY5suK0U/QKmmeCCX6xs22hJLVkitMImxCvEs8EG3SCRCN/ViFPqnq5epIzZ07QJJvkM9Tkz1xnkmXbfSvR7f4H8AtXBkLGj74mMvjM1+VHZpAZ4LM4K/LBWEI9jwP71v1ZEQ6dyvQMf8A/1pmdZnKce/VH1iIsdte4U8VEtY23xOujxtFpWDgKbfjD2YeEhY0OzfjGeLyO/XfnNpAcmcjDwKOXRfU1IyiTRyEkaiz67pb9oJHJb9vVqKfgjLBPyF5Sq9T0KmSUhQmtiQrJGPHVi0DoSabj31G2gW3buHd0pY85lNdcCk8xlNDPXMuSyNiwl+theIb9C7RLIpKvviYy+M6H8qGwSAp6Is19+GP6KxwnggJ/kq6Jht5rnRQA4z9zyRRaXssvyqp5I6Vutv0vkpJaJtnjpz/8B19ytIayazLoAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat;\n    bottom: 0;\n    left: 0;\n  }\n  \n  @media screen and (-webkit-min-device-pixel-ratio: 2), screen and (min-resolution: 192dpi) {\n    .starability-grow > label::after {\n      background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAB4CAMAAACZ62E6AAABAlBMVEUAAACZmZmampr2vSObm5v/yiufn5+ampr1viP1viSZmZn2viOZmZmampqampr2viSampqampqcnJz5vyScnJz3wSf/wyn/xiujo6Oqqqr/0C/1vSOampr2viP2viOampr2viP2vST2viOampqampqampr1vyP3viSampr2vyT4vyX3viSbm5ubm5v5wCT8xSmgoKCampqampr3vyb2wiWenp72viOampqZmZmampr2viP2viP1viSampqbm5v2vyT3viObm5v4vyadnZ34wSSbm5v2viSZmZn2viP2vST2viP2viT1viOZmZn2viT2viX3viT3vyb2vyOZmZn1vSOZmZlNN+fKAAAAVHRSTlMA9uz4PQwS8O7r5+fTw4yMelw2MB0dFRELBgbS+/Hfu7uxqKWdg4N7ZmZMPi8pKRgPs0w7Nhb14drKw6Gck21tXkNDIyMZ1rDLycTBtaqVknlfV0sGP8ZwAAADW0lEQVRYw9zWvYqDQBSG4TPDoCAqKhYKQgoVLFaIgZCkiCBBUqVazv3fyu4aEXWdM85Uy779A+LP58AfTQgw73AwtxFiZIwbxMbUfuB3H4b49YNfZrbGodoI52+cm9hH9sbZwwAXOFbo2zjDsSzWxnecuuvaM8MpdtbEPs7y9azF5phZWrjERaWOPdpLbB81cICrgv3W4mvMLbU6RmFQeA5u5HhFEEbHLdWLsMxvHJXxW16Goh+ZqPyny1Az5j79SsCJoWHsBNAxQ9sNF26bWFuMC8v1LY+mmeTadjaqtaNnnXoxWBcde1nNWnzdb68xrOqvu22/MTzuPutujpJ122NvluSb8tTWk85CclDZQwLS0oa2TQpEKacsJy0kSJaQOKJxROKKxhWJ7zS+k9ijsUdim8Y2ZWNUFBP4pMKfOv8onX9WrsI5gd3VVLXtatxcuU0znGUHCUAS2DgrS6mT6hTzrXEjfIZj5Dk2xKkihqm4wKlQfQRqalhUP9UHo3FIPAG/Et44JVLsDDf0JHmB3OEByOwZES8hSAsviGjBdh3ylh6plmMnW4IyAUVJWcE/76vTell1EIaiMBwIAcWBA9GC0lIdKFXQQUsHVVCklN7ojf3+z3JOxYqK2TH555+K6CJJQtRbr9XtDmCnjH0AX9Va8J+liIMvDtRsCk2pEs6hKVexR2g7KuDihwt5a9MfprY0fkLXU9ZmFLpoJolN6GXKWWfZx0tHCocwKJSxC22ItYUEjmBUJHFjfYz1xQxlfaLiZsBExq2IPtbkNbLtOwwuGgjTLkH43mYtSzam7+1Bsr3nm5uExBQUozEh9V7N7uvmwZcqdpm0C6vJW63bZEuXtbrV2zpDzhrpYLBWMnY1mjV7JWFtMio7zbWniWFxvHnWm1yGxXmOPXP+L3YV2ysjnNhaZNeMcHPvuL27BMnVMaujljBAYyje4niH4g2ONyh+4PiB4gOODyjWcKxh1gZBNoJjEY4R/BLhF4IDEQ4QPBoEoyxH4+bxrUsHyxwxQlg0WHXqYifVLmo67cKY/UtaXFxBV26TLjuHrkp8BPJTMij1xQejdkgO24nf7dBOCRcbzQuNOR9Qs64GzzrfQa8It2oFAA6Zrga9xEeq1KHmLUHIiCAWInsg1x/MLqkMsItF8QAAAABJRU5ErkJggg==\");\n      background-size: 30px auto;\n    }\n  }\n  \n  .starability-grow > input:checked + label::after {\n    background-position: 0 -30px;\n    opacity: 1;\n    -webkit-animation-duration: 1s;\n            animation-duration: 1s;\n    -webkit-animation-name: grow;\n            animation-name: grow;\n    -webkit-animation-fill-mode: forwards;\n            animation-fill-mode: forwards;\n  }","size_bytes":17587},"models/user.js":{"content":"const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\nconst passportLocalMongoose = require(\"passport-local-mongoose\");\n\nconst userSchema = new Schema({\n    email: {\n        type: String,\n        required: true\n    },\n    role: {\n        type: String,\n        enum: ['Student', 'ClubAdmin', 'SystemAdmin'],\n        default: 'Student'\n    }\n});\n\nuserSchema.plugin(passportLocalMongoose);\n\nmodule.exports = mongoose.model(\"User\", userSchema);","size_bytes":456},"init/data.js":{"content":"const sampleListings = [\n  {\n    title: \"Cozy Beachfront Cottage\",\n    description:\n      \"Escape to this charming beachfront cottage for a relaxing getaway. Enjoy stunning ocean views and easy access to the beach.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1552733407-5d5c46c3bb3b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHRyYXZlbHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1500,\n    location: \"Malibu\",\n    country: \"United States\",\n  },\n  {\n    title: \"Modern Loft in Downtown\",\n    description:\n      \"Stay in the heart of the city in this stylish loft apartment. Perfect for urban explorers!\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1501785888041-af3ef285b470?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fHRyYXZlbHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1200,\n    location: \"New York City\",\n    country: \"United States\",\n  },\n  {\n    title: \"Mountain Retreat\",\n    description:\n      \"Unplug and unwind in this peaceful mountain cabin. Surrounded by nature, it's a perfect place to recharge.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1571896349842-33c89424de2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8aG90ZWxzfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1000,\n    location: \"Aspen\",\n    country: \"United States\",\n  },\n  {\n    title: \"Historic Villa in Tuscany\",\n    description:\n      \"Experience the charm of Tuscany in this beautifully restored villa. Explore the rolling hills and vineyards.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8aG90ZWxzfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 2500,\n    location: \"Florence\",\n    country: \"Italy\",\n  },\n  {\n    title: \"Secluded Treehouse Getaway\",\n    description:\n      \"Live among the treetops in this unique treehouse retreat. A true nature lover's paradise.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGhvdGVsc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 800,\n    location: \"Portland\",\n    country: \"United States\",\n  },\n  {\n    title: \"Beachfront Paradise\",\n    description:\n      \"Step out of your door onto the sandy beach. This beachfront condo offers the ultimate relaxation.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fGhvdGVsc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 2000,\n    location: \"Cancun\",\n    country: \"Mexico\",\n  },\n  {\n    title: \"Rustic Cabin by the Lake\",\n    description:\n      \"Spend your days fishing and kayaking on the serene lake. This cozy cabin is perfect for outdoor enthusiasts.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fG1vdW50YWlufGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 900,\n    location: \"Lake Tahoe\",\n    country: \"United States\",\n  },\n  {\n    title: \"Luxury Penthouse with City Views\",\n    description:\n      \"Indulge in luxury living with panoramic city views from this stunning penthouse apartment.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1622396481328-9b1b78cdd9fd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8c2t5JTIwdmFjYXRpb258ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 3500,\n    location: \"Los Angeles\",\n    country: \"United States\",\n  },\n  {\n    title: \"Ski-In/Ski-Out Chalet\",\n    description:\n      \"Hit the slopes right from your doorstep in this ski-in/ski-out chalet in the Swiss Alps.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1502784444187-359ac186c5bb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fHNreSUyMHZhY2F0aW9ufGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 3000,\n    location: \"Verbier\",\n    country: \"Switzerland\",\n  },\n  {\n    title: \"Safari Lodge in the Serengeti\",\n    description:\n      \"Experience the thrill of the wild in a comfortable safari lodge. Witness the Great Migration up close.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1493246507139-91e8fad9978e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mjl8fG1vdW50YWlufGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 4000,\n    location: \"Serengeti National Park\",\n    country: \"Tanzania\",\n  },\n  {\n    title: \"Historic Canal House\",\n    description:\n      \"Stay in a piece of history in this beautifully preserved canal house in Amsterdam's iconic district.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2FtcGluZ3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1800,\n    location: \"Amsterdam\",\n    country: \"Netherlands\",\n  },\n  {\n    title: \"Private Island Retreat\",\n    description:\n      \"Have an entire island to yourself for a truly exclusive and unforgettable vacation experience.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1618140052121-39fc6db33972?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bG9kZ2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 10000,\n    location: \"Fiji\",\n    country: \"Fiji\",\n  },\n  {\n    title: \"Charming Cottage in the Cotswolds\",\n    description:\n      \"Escape to the picturesque Cotswolds in this quaint and charming cottage with a thatched roof.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1602088113235-229c19758e9f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8YmVhY2glMjB2YWNhdGlvbnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1200,\n    location: \"Cotswolds\",\n    country: \"United Kingdom\",\n  },\n  {\n    title: \"Historic Brownstone in Boston\",\n    description:\n      \"Step back in time in this elegant historic brownstone located in the heart of Boston.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1533619239233-6280475a633a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTR8fHNreSUyMHZhY2F0aW9ufGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 2200,\n    location: \"Boston\",\n    country: \"United States\",\n  },\n  {\n    title: \"Beachfront Bungalow in Bali\",\n    description:\n      \"Relax on the sandy shores of Bali in this beautiful beachfront bungalow with a private pool.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1602391833977-358a52198938?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MzJ8fGNhbXBpbmd8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1800,\n    location: \"Bali\",\n    country: \"Indonesia\",\n  },\n  {\n    title: \"Mountain View Cabin in Banff\",\n    description:\n      \"Enjoy breathtaking mountain views from this cozy cabin in the Canadian Rockies.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1521401830884-6c03c1c87ebb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGxvZGdlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1500,\n    location: \"Banff\",\n    country: \"Canada\",\n  },\n  {\n    title: \"Art Deco Apartment in Miami\",\n    description:\n      \"Step into the glamour of the 1920s in this stylish Art Deco apartment in South Beach.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://plus.unsplash.com/premium_photo-1670963964797-942df1804579?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fGxvZGdlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1600,\n    location: \"Miami\",\n    country: \"United States\",\n  },\n  {\n    title: \"Tropical Villa in Phuket\",\n    description:\n      \"Escape to a tropical paradise in this luxurious villa with a private infinity pool in Phuket.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1470165301023-58dab8118cc9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTl8fGxvZGdlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 3000,\n    location: \"Phuket\",\n    country: \"Thailand\",\n  },\n  {\n    title: \"Historic Castle in Scotland\",\n    description:\n      \"Live like royalty in this historic castle in the Scottish Highlands. Explore the rugged beauty of the area.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1585543805890-6051f7829f98?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTl8fGJlYWNoJTIwdmFjYXRpb258ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 4000,\n    location: \"Scottish Highlands\",\n    country: \"United Kingdom\",\n  },\n  {\n    title: \"Desert Oasis in Dubai\",\n    description:\n      \"Experience luxury in the middle of the desert in this opulent oasis in Dubai with a private pool.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1518684079-3c830dcef090?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8ZHViYWl8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 5000,\n    location: \"Dubai\",\n    country: \"United Arab Emirates\",\n  },\n  {\n    title: \"Rustic Log Cabin in Montana\",\n    description:\n      \"Unplug and unwind in this cozy log cabin surrounded by the natural beauty of Montana.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1586375300773-8384e3e4916f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTN8fGxvZGdlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1100,\n    location: \"Montana\",\n    country: \"United States\",\n  },\n  {\n    title: \"Beachfront Villa in Greece\",\n    description:\n      \"Enjoy the crystal-clear waters of the Mediterranean in this beautiful beachfront villa on a Greek island.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1602343168117-bb8ffe3e2e9f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8dmlsbGF8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 2500,\n    location: \"Mykonos\",\n    country: \"Greece\",\n  },\n  {\n    title: \"Eco-Friendly Treehouse Retreat\",\n    description:\n      \"Stay in an eco-friendly treehouse nestled in the forest. It's the perfect escape for nature lovers.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1488462237308-ecaa28b729d7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8c2t5JTIwdmFjYXRpb258ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 750,\n    location: \"Costa Rica\",\n    country: \"Costa Rica\",\n  },\n  {\n    title: \"Historic Cottage in Charleston\",\n    description:\n      \"Experience the charm of historic Charleston in this beautifully restored cottage with a private garden.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1587381420270-3e1a5b9e6904?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGxvZGdlfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1600,\n    location: \"Charleston\",\n    country: \"United States\",\n  },\n  {\n    title: \"Modern Apartment in Tokyo\",\n    description:\n      \"Explore the vibrant city of Tokyo from this modern and centrally located apartment.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1480796927426-f609979314bd?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fHRva3lvfGVufDB8fDB8fHww&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 2000,\n    location: \"Tokyo\",\n    country: \"Japan\",\n  },\n  {\n    title: \"Lakefront Cabin in New Hampshire\",\n    description:\n      \"Spend your days by the lake in this cozy cabin in the scenic White Mountains of New Hampshire.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1578645510447-e20b4311e3ce?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NDF8fGNhbXBpbmd8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1200,\n    location: \"New Hampshire\",\n    country: \"United States\",\n  },\n  {\n    title: \"Luxury Villa in the Maldives\",\n    description:\n      \"Indulge in luxury in this overwater villa in the Maldives with stunning views of the Indian Ocean.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1439066615861-d1af74d74000?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8bGFrZXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 6000,\n    location: \"Maldives\",\n    country: \"Maldives\",\n  },\n  {\n    title: \"Ski Chalet in Aspen\",\n    description:\n      \"Hit the slopes in style with this luxurious ski chalet in the world-famous Aspen ski resort.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxha2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 4000,\n    location: \"Aspen\",\n    country: \"United States\",\n  },\n  {\n    title: \"Secluded Beach House in Costa Rica\",\n    description:\n      \"Escape to a secluded beach house on the Pacific coast of Costa Rica. Surf, relax, and unwind.\",\n    image: {\n      filename: \"listingimage\",\n      url: \"https://images.unsplash.com/photo-1499793983690-e29da59ef1c2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YmVhY2glMjBob3VzZXxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60\",\n    },\n    price: 1800,\n    location: \"Costa Rica\",\n    country: \"Costa Rica\",\n  },\n];\n\nmodule.exports = { data: sampleListings };","size_bytes":14041},"models/listing.js":{"content":"const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\nconst Review = require(\"./review.js\");\n\nconst listingSchema = new Schema({\n    title: {\n        type: String,\n        required: true\n    },\n    description: String,\n    image: {\n        url: String,\n        filename: String\n    },\n    price: Number,\n    location: String,\n    country: String,\n    reviews: [\n        {\n            type: Schema.Types.ObjectId,\n            ref: \"Review\"\n        }\n    ],\n    owner: {\n        type: Schema.Types.ObjectId,\n        ref: \"User\"\n    }\n});\n\nlistingSchema.post(\"findOneAndDelete\", async (listing) => {\n    if(listing) {\n        await Review.deleteMany({_id: {$in: listing.reviews}});\n    }\n});\n\nconst listing = mongoose.model(\"listing\", listingSchema);\n\nmodule.exports = listing;","size_bytes":790},"schema.js":{"content":"const Joi = require(\"joi\");\n\nmodule.exports.eventSchema = Joi.object({\n    event: Joi.object({\n        title: Joi.string().required(),\n        description: Joi.string().required(),\n        image: Joi.string().allow(\"\", null),\n        date: Joi.date().required(),\n        venue: Joi.string().required(),\n        capacity: Joi.number().required().min(1)\n    }).required()\n});\n\nmodule.exports.feedbackSchema = Joi.object({\n    feedback: Joi.object({\n        rating: Joi.number().min(1).max(5).required(),\n        comments: Joi.string().required()\n    }).required()\n});\n","size_bytes":566},"public/css/style.css":{"content":"body {\n    font-family: \"Plus Jakarta Sans\", sans-serif;\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n}\n\n.container {\n    flex: 1;\n}\n\n/* Navbar */\n.navbar {\n    height: 5rem;\n    background-color: white;\n}\n\n.fa-compass {\n    color: #fe424d;\n    font-size: 2rem;\n}\n\n.nav-link {\n    color: #222222;\n}\n\n.f-info-links, .f-info-socials, .f-info-brand {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.f-info-socials i {\n    font-size: 1.2rem;\n    margin-right: 1rem;\n}\n\n.f-info-links a {\n    text-decoration: none;\n    color: #222222;\n}\n\n.f-info-links a:hover {\n    text-decoration: underline;\n}\n\n.f-info {\n    text-align: center;\n    height: 8rem;\n    background-color: #ebebeb;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: space-evenly;\n}\n\n/* Cards */\n.listing-card {\n    border: none;\n    margin-bottom: 2rem;\n}\n.card-img-top {\n    border-radius: 1rem;\n    width: 100%;\n    object-fit: cover;\n}\n.card-body {\n    padding: 0;\n}\n.card-text p {\n    font-weight: 400;\n}\n.listing-link {\n    text-decoration: none;\n}\n/* Card Effect */\n.card-img-overlay {\n    opacity: 0;\n}\n.card-img-overlay:hover {\n    opacity: 0.2;\n    background-color: white;\n}\n\n/* New Page */\n.add-btn {\n    background-color: #fe424d;\n    border: none;\n}\n/* Edit Page */\n.edit-btn {\n    background-color: #fe424d;\n    border: none;\n}\n/* Show Page */\n.show-img {\n    height: 30vh;\n}\n.show-card {\n    padding-left: 0;\n    padding-right: 0;\n}","size_bytes":1513},"models/feedback.js":{"content":"const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\n\nconst feedbackSchema = new Schema({\n    comments: String,\n    rating: {\n        type: Number,\n        min: 1,\n        max: 5\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    author: {\n        type: Schema.Types.ObjectId,\n        ref: \"User\"\n    }\n});\n\nmodule.exports = mongoose.model(\"Feedback\", feedbackSchema);\n","size_bytes":416},"controllers/events.js":{"content":"const Event = require(\"../models/event.js\");\n\nmodule.exports.index = async (req, res) => {\n    let query = {};\n    \n    if(req.user) {\n        if(req.user.role === 'ClubAdmin') {\n            query.createdBy = req.user._id;\n        } else if(req.user.role === 'Student') {\n            query.status = 'Approved';\n        } else if(req.user.role === 'SystemAdmin') {\n        }\n    } else {\n        query.status = 'Approved';\n    }\n    \n    const allEvents = await Event.find(query).populate('createdBy');\n    res.render(\"events/index\", { allEvents });\n};\n\nmodule.exports.renderNewForm = (req, res) => {      \n    res.render(\"events/new\");\n};\n\nmodule.exports.showEvent = async (req, res) => {\n    let { id } = req.params;\n    const event = await Event.findById(id)\n        .populate({\n            path: \"feedbacks\",\n            populate: {\n                path: \"author\"\n            }\n        })\n        .populate(\"createdBy\")\n        .populate(\"registrations\");\n    \n    if(!event) {\n        req.flash(\"error\", `Event not found!`);\n        return res.redirect(\"/events\");\n    }\n    \n    const isRegistered = req.user && event.registrations.some(reg => reg._id.equals(req.user._id));\n    res.render(\"events/show\", { event, isRegistered });\n};\n\nmodule.exports.createEvent = async (req, res) => {\n    let newEvent = new Event(req.body.event);\n    newEvent.createdBy = req.user._id;\n    \n    if (req.file) {\n        let url = req.file.path;\n        let filename = req.file.filename;\n        newEvent.image = {url, filename};\n    }\n    \n    newEvent.status = 'Pending';\n    \n    await newEvent.save();\n    req.flash(\"success\", \"Event proposal submitted! Waiting for admin approval.\");\n    res.redirect(\"/events\");\n};\n\nmodule.exports.renderEditForm = async (req, res) => {\n    let { id } = req.params;\n    const event = await Event.findById(id);\n\n    if(!event) {\n        req.flash(\"error\", \"Event not found!\");\n        return res.redirect(\"/events\");\n    }\n\n    if (event.image && event.image.url) {\n        let originalImageUrl = event.image.url;\n        event.image.url = originalImageUrl.replace(\"/upload\", \"/upload/w_250\");\n    }\n    res.render(\"events/edit\", { event });\n};\n\nmodule.exports.updateEvent = async (req, res) => {\n    let updatedEvent = req.body.event;\n    if(!req.body.event) {\n        throw new ExpressError(400, \"Send valid data for event\");\n    }\n    let { id } = req.params;\n    let event = await Event.findByIdAndUpdate(id, updatedEvent, { runValidators: true });\n    \n    if(typeof req.file !== \"undefined\") {\n        let url = req.file.path;\n        let filename = req.file.filename;\n        event.image = { url, filename };\n        await event.save();\n    }\n    req.flash(\"success\", \"Event Updated!\");\n    res.redirect(`/events/${id}`);\n};\n\nmodule.exports.destroyEvent = async (req, res) => {\n    let { id } = req.params;\n    await Event.findByIdAndDelete(id);\n    req.flash(\"success\", \"Event Deleted\");\n    res.redirect(\"/events\");\n};\n\nmodule.exports.registerForEvent = async (req, res) => {\n    let { id } = req.params;\n    let event = await Event.findById(id);\n    \n    if(!event) {\n        req.flash(\"error\", \"Event not found!\");\n        return res.redirect(\"/events\");\n    }\n    \n    if(event.registrations.includes(req.user._id)) {\n        req.flash(\"error\", \"You are already registered for this event!\");\n        return res.redirect(`/events/${id}`);\n    }\n    \n    if(event.registrations.length >= event.capacity) {\n        req.flash(\"error\", \"Event is full!\");\n        return res.redirect(`/events/${id}`);\n    }\n    \n    event.registrations.push(req.user._id);\n    await event.save();\n    req.flash(\"success\", \"Successfully registered for the event!\");\n    res.redirect(`/events/${id}`);\n};\n\nmodule.exports.unregisterFromEvent = async (req, res) => {\n    let { id } = req.params;\n    await Event.findByIdAndUpdate(id, {$pull: {registrations: req.user._id}});\n    req.flash(\"success\", \"Unregistered from event!\");\n    res.redirect(`/events/${id}`);\n};\n","size_bytes":3979},"routes/feedback.js":{"content":"const express = require(\"express\");\nconst router = express.Router({ mergeParams: true });\nconst wrapAsync = require(\"../utils/wrapAsync.js\");\nconst { validateFeedback, isLoggedIn, isFeedbackAuthor } = require(\"../middleware.js\");\nconst feedbackController = require(\"../controllers/feedback.js\");\n\nrouter.post(\"/\",\n    isLoggedIn,\n    validateFeedback,\n    wrapAsync(feedbackController.createFeedback)\n);\n\nrouter.delete(\"/:feedbackId\",\n    isLoggedIn,\n    isFeedbackAuthor,\n    wrapAsync(feedbackController.destroyFeedback)\n);\n\nmodule.exports = router;\n","size_bytes":552},"controllers/feedback.js":{"content":"const Event = require(\"../models/event.js\");\nconst Feedback = require(\"../models/feedback.js\");\n\nmodule.exports.createFeedback = async (req, res) => {\n    let event = await Event.findById(req.params.id);\n    \n    if(!event) {\n        req.flash(\"error\", \"Event not found!\");\n        return res.redirect(\"/events\");\n    }\n    \n    let newFeedback = new Feedback(req.body.feedback);\n    newFeedback.author = req.user._id;\n    event.feedbacks.push(newFeedback);\n\n    await newFeedback.save();\n    await event.save();\n\n    req.flash(\"success\", \"Feedback submitted successfully!\");\n    res.redirect(`/events/${req.params.id}`);\n};\n\nmodule.exports.destroyFeedback = async (req, res) => {\n    let { id, feedbackId } = req.params;\n    await Event.findByIdAndUpdate(id, {$pull: {feedbacks: feedbackId}});\n    await Feedback.findByIdAndDelete(feedbackId);\n    req.flash(\"success\", \"Feedback Deleted!\");\n    res.redirect(`/events/${id}`);  \n};\n","size_bytes":932},"controllers/admin.js":{"content":"const Event = require(\"../models/event.js\");\nconst User = require(\"../models/user.js\");\n\nmodule.exports.renderDashboard = async (req, res) => {\n    const pendingEvents = await Event.find({ status: 'Pending' }).populate('createdBy');\n    const allUsers = await User.find({});\n    res.render(\"admin/dashboard\", { pendingEvents, allUsers });\n};\n\nmodule.exports.approveEvent = async (req, res) => {\n    let { id } = req.params;\n    await Event.findByIdAndUpdate(id, { status: 'Approved' });\n    req.flash(\"success\", \"Event approved successfully!\");\n    res.redirect(\"/admin/dashboard\");\n};\n\nmodule.exports.rejectEvent = async (req, res) => {\n    let { id } = req.params;\n    await Event.findByIdAndUpdate(id, { status: 'Rejected' });\n    req.flash(\"success\", \"Event rejected!\");\n    res.redirect(\"/admin/dashboard\");\n};\n\nmodule.exports.updateUserRole = async (req, res) => {\n    let { id } = req.params;\n    let { role } = req.body;\n    \n    if(!['Student', 'ClubAdmin', 'SystemAdmin'].includes(role)) {\n        req.flash(\"error\", \"Invalid role!\");\n        return res.redirect(\"/admin/dashboard\");\n    }\n    \n    await User.findByIdAndUpdate(id, { role });\n    req.flash(\"success\", \"User role updated successfully!\");\n    res.redirect(\"/admin/dashboard\");\n};\n\nmodule.exports.deleteUser = async (req, res) => {\n    let { id } = req.params;\n    await User.findByIdAndDelete(id);\n    req.flash(\"success\", \"User deleted!\");\n    res.redirect(\"/admin/dashboard\");\n};\n","size_bytes":1457},"replit.md":{"content":"# Nexus NITW - Club Event Management System\n\n## Overview\nNexus NITW is a full-stack web application for managing club events at NITW. The system supports three user roles: Students, Club Admins, and System Admins, each with specific permissions and capabilities.\n\n## Tech Stack\n- **Backend**: Node.js, Express.js\n- **Database**: MongoDB (Atlas)\n- **Authentication**: Passport.js (Local Strategy) with role-based access control\n- **Templating**: EJS with ejs-mate\n- **Image Storage**: Cloudinary\n- **Session Management**: express-session\n- **Validation**: Joi\n\n## Project Structure\n```\n controllers/       # Route controllers (events, feedback, admin, users)\n models/           # Mongoose models (User, Event, Feedback)\n routes/           # Express routes (event, feedback, admin, user)\n views/            # EJS templates\n    events/       # Event views\n    admin/        # Admin dashboard\n    users/        # Auth views\n    includes/     # Navbar, footer, flash\n public/           # Static assets (CSS, JS)\n utils/            # Utility functions\n middleware.js     # Custom middleware & role authorization\n schema.js         # Joi validation schemas\n app.js           # Main application file\n```\n\n## User Roles & Permissions\n\n### Student\n- Browse approved events\n- Register for events\n- Submit feedback after attending events\n- View their registrations\n\n### Club Admin\n- Propose new events (status: Pending)\n- Edit/delete their own events\n- View registrations for their events\n- View feedback on their events\n\n### System Admin\n- Approve or reject event proposals\n- Manage user roles\n- Delete inappropriate content\n- Full system oversight\n\n## Database Models\n\n### User Model\n- email, username, password (hashed)\n- role: 'Student' | 'ClubAdmin' | 'SystemAdmin'\n\n### Event Model\n- title, description, date, venue, capacity\n- image (Cloudinary), createdBy (User ref)\n- status: 'Pending' | 'Approved' | 'Rejected'\n- registrations: [User refs]\n- feedbacks: [Feedback refs]\n\n### Feedback Model\n- comments, rating (1-5)\n- author (User ref)\n- createdAt\n\n## Environment Variables Required\n- `MONGO_URL`: MongoDB Atlas connection string\n- `SESSION_SECRET`: Secret key for session encryption\n- `CLOUD_NAME`: Cloudinary cloud name\n- `CLOUD_API_KEY`: Cloudinary API key\n- `CLOUD_API_SECRET`: Cloudinary API secret\n\n## Key Features\n- Role-based authentication and authorization\n- Event proposal and approval workflow\n- Student registration system with capacity limits\n- Feedback system (only for registered attendees)\n- Admin dashboard for approvals and user management\n- Image upload to Cloudinary\n- Flash messages for user feedback\n\n## Database Configuration\nThe application uses MongoDB Atlas. Database name: `nexus_nitw`\nMake sure the MONGO_URL secret is set to your MongoDB Atlas connection string.\n\n## Recent Changes (October 15, 2025)\n- Refactored from WanderNest Airbnb clone to Nexus NITW CEMS\n- Replaced Listing model with Event model\n- Replaced Review model with Feedback model\n- Added role-based access control (Student, ClubAdmin, SystemAdmin)\n- Implemented event approval workflow\n- Added student registration system\n- Created admin dashboard for system management\n- Updated all routes, controllers, and views\n- Rebranded UI to Nexus NITW\n\n## Development\n- Server runs on port 5000\n- Database: nexus_nitw\n- EJS views with layouts using ejs-mate\n\n## Important Notes\n- Default role for new users is 'Student'\n- System Admin role can only be assigned by existing System Admins\n- Events must be approved before students can register\n- Only registered students can leave feedback\n- Club Admins can only edit/delete their own events\n","size_bytes":3755},"routes/admin.js":{"content":"const express = require(\"express\");\nconst router = express.Router();\nconst wrapAsync = require(\"../utils/wrapAsync.js\");\nconst { isLoggedIn, isSystemAdmin } = require(\"../middleware.js\");\nconst adminController = require(\"../controllers/admin.js\");\n\nrouter.get(\"/dashboard\",\n    isLoggedIn,\n    isSystemAdmin,\n    wrapAsync(adminController.renderDashboard)\n);\n\nrouter.post(\"/events/:id/approve\",\n    isLoggedIn,\n    isSystemAdmin,\n    wrapAsync(adminController.approveEvent)\n);\n\nrouter.post(\"/events/:id/reject\",\n    isLoggedIn,\n    isSystemAdmin,\n    wrapAsync(adminController.rejectEvent)\n);\n\nrouter.post(\"/users/:id/role\",\n    isLoggedIn,\n    isSystemAdmin,\n    wrapAsync(adminController.updateUserRole)\n);\n\nrouter.delete(\"/users/:id\",\n    isLoggedIn,\n    isSystemAdmin,\n    wrapAsync(adminController.deleteUser)\n);\n\nmodule.exports = router;\n","size_bytes":844},"models/event.js":{"content":"const mongoose = require(\"mongoose\");\nconst Schema = mongoose.Schema;\nconst Feedback = require(\"./feedback.js\");\n\nconst eventSchema = new Schema({\n    title: {\n        type: String,\n        required: true\n    },\n    description: String,\n    image: {\n        url: String,\n        filename: String\n    },\n    date: {\n        type: Date,\n        required: true\n    },\n    venue: {\n        type: String,\n        required: true\n    },\n    capacity: {\n        type: Number,\n        required: true,\n        min: 1\n    },\n    feedbacks: [\n        {\n            type: Schema.Types.ObjectId,\n            ref: \"Feedback\"\n        }\n    ],\n    createdBy: {\n        type: Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    status: {\n        type: String,\n        enum: ['Pending', 'Approved', 'Rejected'],\n        default: 'Pending'\n    },\n    registrations: [\n        {\n            type: Schema.Types.ObjectId,\n            ref: \"User\"\n        }\n    ]\n}, { timestamps: true });\n\neventSchema.post(\"findOneAndDelete\", async (event) => {\n    if(event) {\n        await Feedback.deleteMany({_id: {$in: event.feedbacks}});\n    }\n});\n\nconst Event = mongoose.model(\"Event\", eventSchema);\n\nmodule.exports = Event;\n","size_bytes":1218},"routes/event.js":{"content":"const express = require(\"express\");\nconst router = express.Router();\nconst wrapAsync = require(\"../utils/wrapAsync.js\");\nconst { isLoggedIn, isClubAdmin, isEventCreator, validateEvent } = require(\"../middleware.js\");\nconst eventController = require(\"../controllers/events.js\");\nconst multer = require(\"multer\");\nconst { storage } = require(\"../cloudConfig.js\");\nconst upload = multer({ storage });\n\nrouter\n    .route(\"/\")\n    .get(wrapAsync(eventController.index))\n    .post(\n        isLoggedIn,\n        isClubAdmin,\n        upload.single(\"event[image]\"),\n        validateEvent,\n        wrapAsync(eventController.createEvent)\n    );\n\nrouter.get(\"/new\",\n    isLoggedIn,\n    isClubAdmin,\n    eventController.renderNewForm\n);\n    \nrouter\n    .route(\"/:id\")\n    .get(\n        wrapAsync(eventController.showEvent)\n    )\n    .put(\n        isLoggedIn,\n        isClubAdmin,\n        isEventCreator,\n        upload.single(\"event[image]\"),\n        validateEvent,\n        wrapAsync(eventController.updateEvent)\n    )\n    .delete(\n        isLoggedIn,\n        isClubAdmin,\n        isEventCreator,\n        wrapAsync(eventController.destroyEvent)\n    );\n\nrouter.get(\"/:id/edit\",\n    isLoggedIn,\n    isClubAdmin,\n    isEventCreator,\n    wrapAsync(eventController.renderEditForm)\n);\n\nrouter.post(\"/:id/register\",\n    isLoggedIn,\n    wrapAsync(eventController.registerForEvent)\n);\n\nrouter.post(\"/:id/unregister\",\n    isLoggedIn,\n    wrapAsync(eventController.unregisterFromEvent)\n);\n\nmodule.exports = router;\n","size_bytes":1490}},"version":2}